<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="662px" preserveAspectRatio="none" style="width:1383px;height:662px;background:#FFFFFF;" version="1.1" viewBox="0 0 1383 662" width="1383px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="650.9999" style="stroke:#181818;stroke-width:0.5;" width="1147.5" x="230" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="118" x="744.75" y="18.077">&lt;&lt;container (C4)&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60" x="744.75" y="33.677">MD Tasks</text><rect fill="#FFFFFF" height="499.6" style="stroke:#181818;stroke-width:1.0;" width="10" x="257" y="104.6"/><rect fill="#FFFFFF" height="440.4" style="stroke:#181818;stroke-width:1.0;" width="10" x="494" y="134.2"/><rect fill="#FFFFFF" height="381.1999" style="stroke:#181818;stroke-width:1.0;" width="10" x="641" y="163.8"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="994.5" y="193.4"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="994.5" y="312.6"/><rect fill="#FFFFFF" height="29.6" style="stroke:#181818;stroke-width:1.0;" width="10" x="1098.5" y="372.2001"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1098.5" y="443.6"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1209.5" y="253"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="262" x2="262" y1="73" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="499" x2="499" y1="73" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="646" x2="646" y1="73" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="763" x2="763" y1="73" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="879" x2="879" y1="512.5" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="999" x2="999" y1="73" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1103" x2="1103" y1="73" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1214" x2="1214" y1="73" y2="622.2"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1335.5" x2="1335.5" y1="411.1" y2="622.2"/><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="234" y="41.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="241" y="61.206">:Route</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="234" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="241" y="641.2059">:Route</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="459" y="41.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="466" y="61.206">:Controller</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="459" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="466" y="641.2059">:Controller</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="587" y="41.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="594" y="61.206">:RequestService</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="587" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="594" y="641.2059">:RequestService</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="715" y="41.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="722" y="61.206">:TaskService</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="715" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="722" y="641.2059">:TaskService</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="821" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="828" y="641.2059">dto:requestDTO</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="947" y="41.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="954" y="61.206">:RequestRepo</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="947" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="954" y="641.2059">:RequestRepo</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="1062" y="41.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1069" y="61.206">:TaskRepo</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="1062" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1069" y="641.2059">:TaskRepo</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1155" y="41.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1162" y="61.206">request:Request</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1155" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1162" y="641.2059">request:Request</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1298.5" y="621.2"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1305.5" y="641.2059">task:Task</text><rect fill="#FFFFFF" height="499.6" style="stroke:#181818;stroke-width:1.0;" width="10" x="257" y="104.6"/><rect fill="#FFFFFF" height="440.4" style="stroke:#181818;stroke-width:1.0;" width="10" x="494" y="134.2"/><rect fill="#FFFFFF" height="381.1999" style="stroke:#181818;stroke-width:1.0;" width="10" x="641" y="163.8"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="994.5" y="193.4"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="994.5" y="312.6"/><rect fill="#FFFFFF" height="29.6" style="stroke:#181818;stroke-width:1.0;" width="10" x="1098.5" y="372.2001"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1098.5" y="443.6"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1209.5" y="253"/><ellipse cx="4.5" cy="103.85" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="245,100.6,255,104.6,245,108.6,249,104.6" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="9" x2="251" y1="104.6" y2="104.6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="99.077">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="23" y="99.077">PATCH /requests/{id}/accept {robotId}</text><polygon fill="#181818" points="482,130.2,492,134.2,482,138.2,486,134.2" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="267" x2="488" y1="134.2" y2="134.2"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="274" y="128.677">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="285" y="128.677">acceptRequest(requestId, robotId)</text><polygon fill="#181818" points="629,159.8,639,163.8,629,167.8,633,163.8" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="504" x2="635" y1="163.8" y2="163.8"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="511" y="158.277">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="522" y="158.277">getById(requestId)</text><polygon fill="#181818" points="982.5,189.4,992.5,193.4,982.5,197.4,986.5,193.4" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="651" x2="988.5" y1="193.4" y2="193.4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="658" y="187.877">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="669" y="187.877">getById(requestId)</text><polygon fill="#181818" points="1197.5,249,1207.5,253,1197.5,257,1201.5,253" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="651" x2="1203.5" y1="253" y2="253"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="658" y="247.477">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="669" y="247.477">changeState(accepted)</text><polygon fill="#181818" points="982.5,308.6,992.5,312.6,982.5,316.6,986.5,312.6" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="651" x2="988.5" y1="312.6" y2="312.6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="658" y="307.077">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="669" y="307.077">save(request)</text><polygon fill="#181818" points="1086.5,368.2001,1096.5,372.2001,1086.5,376.2001,1090.5,372.2001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="651" x2="1092.5" y1="372.2001" y2="372.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="658" y="366.677">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="669" y="366.677">create(requestId, deviceId)</text><polygon fill="#181818" points="1286.5,397.8001,1296.5,401.8001,1286.5,405.8001,1290.5,401.8001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1103.5" x2="1292.5" y1="401.8001" y2="401.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1110.5" y="396.2771">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1121.5" y="396.2771">create(requestId, deviceId)</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1298.5" y="380.2001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1305.5" y="400.206">task:Task</text><polygon fill="#181818" points="1086.5,439.6,1096.5,443.6,1086.5,447.6,1090.5,443.6" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="651" x2="1092.5" y1="443.6" y2="443.6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="658" y="438.077">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="669" y="438.077">save(task)</text><polygon fill="#181818" points="809,499.2,819,503.2,809,507.2,813,503.2" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="651" x2="815" y1="503.2" y2="503.2"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="658" y="497.677">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="676" y="497.677">create(reqDTO)</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="821" y="481.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="828" y="501.6059">dto:requestDTO</text><polygon fill="#181818" points="515,540.9999,505,544.9999,515,548.9999,511,544.9999" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="509" x2="645" y1="544.9999" y2="544.9999"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="521" y="539.4769">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="539" y="539.4769">sucess(reqDTO)</text><polygon fill="#181818" points="278,570.5999,268,574.5999,278,578.5999,274,574.5999" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="272" x2="498" y1="574.5999" y2="574.5999"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="284" y="569.0769">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="302" y="569.0769">sucess(reqDTO)</text><polygon fill="#181818" points="11,600.2,1,604.2,11,608.2,7,604.2" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="261" y1="604.2" y2="604.2"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="598.677">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="35" y="598.677">200 OK</text><!--MD5=[18a35fc5e899605725f5f094eba371aa]
@startuml process-view
autonumber

box "<<container (C4)>>\nMD Tasks" <<center>>#LightBlue
  participant ROUTE as ":Route"
  participant MDTCTRL as ":Controller"
  participant MDTSRV as ":RequestService"
  participant MDTSRV2 as ":TaskService"
  participant MDTDTO as "dto:requestDTO"
  participant MDTREPO as ":RequestRepo"
  participant MDTREPO2 as ":TaskRepo"
  participant BUILD as "request:Request"
  participant BUILD2 as "task:Task"
end box

?o-> ROUTE : PATCH /requests/{id}/accept {robotId}
activate ROUTE

ROUTE -> MDTCTRL : acceptRequest(requestId, robotId)
activate MDTCTRL

MDTCTRL -> MDTSRV : getById(requestId)
activate MDTSRV

MDTSRV -> MDTREPO : getById(requestId)
activate MDTREPO
deactivate MDTREPO

MDTSRV - -> BUILD : changeState(accepted)
activate BUILD
deactivate BUILD

MDTSRV - -> MDTREPO : save(request)
activate MDTREPO
deactivate MDTREPO

MDTSRV - -> MDTREPO2 : create(requestId, deviceId)
activate MDTREPO2

MDTREPO2 - -> BUILD2** : create(requestId, deviceId)

deactivate MDTREPO2

MDTSRV - -> MDTREPO2 : save(task)
activate MDTREPO2
deactivate MDTREPO2

MDTSRV - -> MDTDTO** : create(reqDTO)
deactivate MDTDTO
deactivate MDTREPO

MDTSRV - -> MDTCTRL : sucess(reqDTO)
deactivate MDTSRV

MDTCTRL - -> ROUTE : sucess(reqDTO)
deactivate MDTCTRL

<- - ROUTE : 200 OK
deactivate ROUTE

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>