<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="532px" preserveAspectRatio="none" style="width:1227px;height:532px;background:#FFFFFF;" version="1.1" viewBox="0 0 1227 532" width="1227px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="403.49" style="stroke:#181818;stroke-width:1.0;" width="10" x="162" y="72.7739"/><rect fill="#FFFFFF" height="340.0779" style="stroke:#181818;stroke-width:1.0;" width="10" x="356" y="104.4799"/><rect fill="#FFFFFF" height="276.6659" style="stroke:#181818;stroke-width:1.0;" width="10" x="550" y="136.186"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="736" y="167.892"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="736" y="275.3719"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="959" y="337.0779"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="166.5" x2="166.5" y1="39.0679" y2="494.2639"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="360.5" x2="360.5" y1="39.0679" y2="494.2639"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="555" x2="555" y1="39.0679" y2="494.2639"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="741" x2="741" y1="39.0679" y2="494.2639"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="853" x2="853" y1="239.632" y2="494.2639"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="964" x2="964" y1="39.0679" y2="494.2639"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1135" x2="1135" y1="377.1119" y2="494.2639"/><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="116.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="123.5" y="26.9659">:DeviceRoute</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="116.5" y="493.2639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="123.5" y="515.2299">:DeviceRoute</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="296.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="303.5" y="26.9659">:DeviceController</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="296.5" y="493.2639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="303.5" y="515.2299">:DeviceController</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="500" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="507" y="26.9659">:DeviceService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="500" y="493.2639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="507" y="515.2299">:DeviceService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="693" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="700" y="26.9659">:DeviceRepo</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="693" y="493.2639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="700" y="515.2299">:DeviceRepo</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="799" y="493.2639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="806" y="515.2299">:device:Device</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="918" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="925" y="26.9659">:DeviceMap</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="918" y="493.2639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="925" y="515.2299">:DeviceMap</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="1049" y="493.2639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="1056" y="515.2299">:deviceDTO:IDeviceDTO</text><rect fill="#FFFFFF" height="403.49" style="stroke:#181818;stroke-width:1.0;" width="10" x="162" y="72.7739"/><rect fill="#FFFFFF" height="340.0779" style="stroke:#181818;stroke-width:1.0;" width="10" x="356" y="104.4799"/><rect fill="#FFFFFF" height="276.6659" style="stroke:#181818;stroke-width:1.0;" width="10" x="550" y="136.186"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="736" y="167.892"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="736" y="275.3719"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="959" y="337.0779"/><ellipse cx="35.5" cy="72.0239" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="150,68.7739,160,72.7739,150,76.7739,154,72.7739" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="40" x2="156" y1="72.7739" y2="72.7739"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="43" y="66.9649">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="54" y="66.9649">PATCH /devices</text><polygon fill="#181818" points="344,100.4799,354,104.4799,344,108.4799,348,104.4799" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="172" x2="350" y1="104.4799" y2="104.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="179" y="98.6709">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="190" y="98.6709">inhibitDevice(deviceCode)</text><polygon fill="#181818" points="538,132.186,548,136.186,538,140.186,542,136.186" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="366" x2="544" y1="136.186" y2="136.186"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="373" y="130.377">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="384" y="130.377">inhibitDevice(deviceCode)</text><polygon fill="#181818" points="724,163.892,734,167.892,724,171.892,728,167.892" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="730" y1="167.892" y2="167.892"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="567" y="162.083">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="578" y="162.083">findByCode(deviceCode)</text><polygon fill="#181818" points="571,195.598,561,199.598,571,203.598,567,199.598" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="565" x2="740" y1="199.598" y2="199.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="577" y="193.789">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="588" y="193.789">device</text><polygon fill="#181818" points="787,227.304,797,231.304,787,235.304,791,231.304" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="793" y1="231.304" y2="231.304"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="567" y="225.495">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="578" y="225.495">create(device, isAvailable=false)</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="799" y="207.598"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="806" y="229.5639">:device:Device</text><polygon fill="#181818" points="724,271.3719,734,275.3719,724,279.3719,728,275.3719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="730" y1="275.3719" y2="275.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="567" y="269.5629">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="578" y="269.5629">save(updatedDevice)</text><polygon fill="#181818" points="947,333.0779,957,337.0779,947,341.0779,951,337.0779" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="953" y1="337.0779" y2="337.0779"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="567" y="331.2689">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="578" y="331.2689">toDto(device)</text><polygon fill="#181818" points="1037,364.784,1047,368.784,1037,372.784,1041,368.784" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="964" x2="1043" y1="368.784" y2="368.784"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="971" y="362.975">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="982" y="362.975">create()</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="1049" y="345.0779"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="1056" y="367.0439">:deviceDTO:IDeviceDTO</text><polygon fill="#181818" points="377,408.8519,367,412.8519,377,416.8519,373,412.8519" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="371" x2="554" y1="412.8519" y2="412.8519"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="383" y="407.0429">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="401" y="407.0429">deviceDto</text><polygon fill="#181818" points="183,440.5579,173,444.5579,183,448.5579,179,444.5579" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="177" x2="360" y1="444.5579" y2="444.5579"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="189" y="438.7489">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="207" y="438.7489">deviceDto</text><polygon fill="#181818" points="11,472.2639,1,476.2639,11,480.2639,7,476.2639" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="166" y1="476.2639" y2="476.2639"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="470.4549">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="35" y="470.4549">200 OK (device JSON)</text><!--MD5=[e05d7ecde0e1ad8c7aee7fccd4318f48]
@startuml process-view
autonumber
participant route as ":DeviceRoute"
participant controller as ":DeviceController"
participant service as ":DeviceService"
participant device_repo as ":DeviceRepo"
participant device as ":device:Device"
participant map as ":DeviceMap"
participant dto as ":deviceDTO:IDeviceDTO"

?o-> route : PATCH /devices
activate route
route -> controller : inhibitDevice(deviceCode)
activate controller
controller -> service : inhibitDevice(deviceCode)
activate service
service -> device_repo : findByCode(deviceCode)
activate device_repo
service <- - device_repo : device
deactivate device_repo
service -> device** : create(device, isAvailable=false)
service -> device_repo : save(updatedDevice)
activate device_repo
deactivate device_repo
service -> map : toDto(device)
activate map
map -> dto** : create()
deactivate map
service - -> controller : deviceDto
deactivate service
controller - -> route : deviceDto
deactivate controller
<- - route : 200 OK (device JSON)
deactivate route

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>