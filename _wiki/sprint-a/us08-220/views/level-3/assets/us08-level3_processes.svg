<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="511px" preserveAspectRatio="none" style="width:1631px;height:511px;background:#FFFFFF;" version="1.1" viewBox="0 0 1631 511" width="1631px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="382.4722" style="stroke:#181818;stroke-width:1.0;" width="10" x="397" y="72.7739"/><rect fill="#FFFFFF" height="319.0602" style="stroke:#181818;stroke-width:1.0;" width="10" x="676" y="104.4799"/><rect fill="#FFFFFF" height="255.6481" style="stroke:#181818;stroke-width:1.0;" width="10" x="955" y="136.186"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1312" y="167.892"/><rect fill="#FFFFFF" height="95.118" style="stroke:#181818;stroke-width:1.0;" width="10" x="1423.5" y="258.01"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1570.5" y="289.716"/><rect fill="none" height="146.5301" style="stroke:#000000;stroke-width:1.5;" width="725" x="900.5" y="214.598"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="402" x2="402" y1="39.0679" y2="473.2461"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="681" x2="681" y1="39.0679" y2="473.2461"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="959.5" x2="959.5" y1="39.0679" y2="473.2461"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1044.5" x2="1044.5" y1="39.0679" y2="473.2461"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1317" x2="1317" y1="39.0679" y2="473.2461"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1428" x2="1428" y1="39.0679" y2="473.2461"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1575.5" x2="1575.5" y1="39.0679" y2="473.2461"/><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="357" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="364" y="26.9659">:FloorRoute</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="357" y="472.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="364" y="494.2121">:FloorRoute</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="622" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="629" y="26.9659">:FloorController</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="622" y="472.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="629" y="494.2121">:FloorController</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="910.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="917.5" y="26.9659">:FloorService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="910.5" y="472.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="917.5" y="494.2121">:FloorService</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="1019.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1026.5" y="26.9659">:Floor</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="1019.5" y="472.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1026.5" y="494.2121">:Floor</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1256" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1263" y="26.9659">:FloorRepository</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1256" y="472.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1263" y="494.2121">:FloorRepository</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="1388" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1395" y="26.9659">:FloorMap</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="1388" y="472.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1395" y="494.2121">:FloorMap</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="1535.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1542.5" y="26.9659">:FloorDTO</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="1535.5" y="472.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1542.5" y="494.2121">:FloorDTO</text><rect fill="#FFFFFF" height="382.4722" style="stroke:#181818;stroke-width:1.0;" width="10" x="397" y="72.7739"/><rect fill="#FFFFFF" height="319.0602" style="stroke:#181818;stroke-width:1.0;" width="10" x="676" y="104.4799"/><rect fill="#FFFFFF" height="255.6481" style="stroke:#181818;stroke-width:1.0;" width="10" x="955" y="136.186"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1312" y="167.892"/><rect fill="#FFFFFF" height="95.118" style="stroke:#181818;stroke-width:1.0;" width="10" x="1423.5" y="258.01"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1570.5" y="289.716"/><ellipse cx="4.5" cy="72.0239" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="385,68.7739,395,72.7739,385,76.7739,389,72.7739" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="9" x2="391" y1="72.7739" y2="72.7739"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="66.9649">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="359" x="23" y="66.9649">GET /floors?buildingCode={buildingCode}&amp;filter=connectors</text><polygon fill="#181818" points="664,100.4799,674,104.4799,664,108.4799,668,104.4799" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407" x2="670" y1="104.4799" y2="104.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="414" y="98.6709">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="425" y="98.6709">listFloorsWithConnectors(buildingCode)</text><polygon fill="#181818" points="943,132.186,953,136.186,943,140.186,947,136.186" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="686" x2="949" y1="136.186" y2="136.186"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="693" y="130.377">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="704" y="130.377">listFloorsWithConnectors(buildingCode)</text><polygon fill="#181818" points="1300,163.892,1310,167.892,1300,171.892,1304,167.892" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="965" x2="1306" y1="167.892" y2="167.892"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="972" y="162.083">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="983" y="162.083">findAllByBuildingCodeWithConnectors(buildingCode)</text><polygon fill="#181818" points="976,195.598,966,199.598,976,203.598,972,199.598" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="970" x2="1316" y1="199.598" y2="199.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="982" y="193.789">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="993" y="193.789">List&lt;Floor&gt;</text><path d="M900.5,214.598 L973.5,214.598 L973.5,224.304 L963.5,234.304 L900.5,234.304 L900.5,214.598 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="146.5301" style="stroke:#000000;stroke-width:1.5;" width="725" x="900.5" y="214.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="915.5" y="229.495">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="83" x="988.5" y="228.3569">[for each floor]</text><polygon fill="#181818" points="1411.5,254.01,1421.5,258.01,1411.5,262.01,1415.5,258.01" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="965" x2="1417.5" y1="258.01" y2="258.01"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="972" y="252.201">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="983" y="252.201">mapToDTOs(List&lt;Floor&gt;)</text><polygon fill="#181818" points="1558.5,285.716,1568.5,289.716,1558.5,293.716,1562.5,289.716" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1433.5" x2="1564.5" y1="289.716" y2="289.716"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1440.5" y="283.907">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="1451.5" y="283.907">mapToDTO(Floor)</text><polygon fill="#181818" points="1444.5,317.4221,1434.5,321.4221,1444.5,325.4221,1440.5,321.4221" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1438.5" x2="1574.5" y1="321.4221" y2="321.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1450.5" y="315.6131">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1461.5" y="315.6131">FloorDTO</text><polygon fill="#181818" points="976,349.1281,966,353.1281,976,357.1281,972,353.1281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="970" x2="1427.5" y1="353.1281" y2="353.1281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="982" y="347.3191">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="993" y="347.3191">FloorDTO[]</text><polygon fill="#181818" points="697,387.8341,687,391.8341,697,395.8341,693,391.8341" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="691" x2="959" y1="391.8341" y2="391.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="703" y="386.0251">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="721" y="386.0251">FloorDTO[]</text><polygon fill="#181818" points="418,419.5401,408,423.5401,418,427.5401,414,423.5401" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="412" x2="680" y1="423.5401" y2="423.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="424" y="417.7311">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="442" y="417.7311">FloorDTO[]</text><polygon fill="#181818" points="11,451.2461,1,455.2461,11,459.2461,7,455.2461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="401" y1="455.2461" y2="455.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="449.4371">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="35" y="449.4371">200 OK (list of floors as JSON)</text><!--MD5=[d2691c5b1c20dc62a488c55f1cc341da]
@startuml us08-level3_processes
autonumber

participant ROUTE as ":FloorRoute"
participant CTRL as ":FloorController"
participant SVC as ":FloorService"
participant E as ":Floor"
participant REPO as ":FloorRepository"
participant FMAP as ":FloorMap"
participant DTO as ":FloorDTO"

?o-> ROUTE : GET /floors?buildingCode={buildingCode}&filter=connectors
activate ROUTE

  ROUTE -> CTRL : listFloorsWithConnectors(buildingCode)
  activate CTRL

    CTRL -> SVC : listFloorsWithConnectors(buildingCode)
    activate SVC

      SVC -> REPO : findAllByBuildingCodeWithConnectors(buildingCode)
      activate REPO

      REPO - -> SVC : List<Floor>
      deactivate REPO

      loop for each floor

        SVC -> FMAP : mapToDTOs(List<Floor>)
        activate FMAP

          FMAP -> DTO : mapToDTO(Floor)
          activate DTO

          DTO - -> FMAP : FloorDTO
          deactivate DTO

        FMAP - -> SVC : FloorDTO[]
        deactivate FMAP
      
      end

    CTRL <- - SVC : FloorDTO[]
    deactivate SVC

  ROUTE <- - CTRL : FloorDTO[]
  deactivate CTRL
  
<- - ROUTE : 200 OK (list of floors as JSON)
deactivate ROUTE

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>